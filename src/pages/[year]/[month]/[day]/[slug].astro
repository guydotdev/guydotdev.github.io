---
import Base from '../../../../layouts/base.astro'

import { getCollection } from 'astro:content'

export async function getStaticPaths() {
  const blogEntries = await getCollection('blog')
  const paths = blogEntries.map(entry => {
    const dt = entry.data.date
    const year = dt.getFullYear().toString()
    const month = (dt.getMonth() + 1).toString().padStart(2, '0')
    const day = (dt.getDate() + 1).toString().padStart(2, '0')
    const slug = entry.slug

    return {
      params: { year, month, day, slug },
      props: { entry }
    }
  })
  return paths
}

const { entry } = Astro.props
const { Content } = await entry.render()
---

<Base title="The Guy Wire">
  <Content />
</Base>
